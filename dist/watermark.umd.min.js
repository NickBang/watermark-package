!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).watermark=t()}(this,(function(){"use strict";var e={};var t={w_width:240,w_height:140,w_top:"0px",w_left:"0px",w_rotateDeg:25,w_font:"1.2rem Vedana",w_color:"#666",w_opacity:"0.1",w_zIndex:"100000"};return e.setWaterMark=t=>{var o=e.loadWatermark(t);null===document.getElementById(o)&&(o=e.loadWatermark(t))},e.removeWatermark=()=>{var e="w_vm_id_3.14159";null!==document.getElementById(e)&&document.body.removeChild(document.getElementById(e))},e.loadWatermark=o=>{var n={};n=o.w_options&&"[object Object]"===Object.prototype.toString.call(o.w_options)?Object.assign({},t,o.w_options):t;var r="w_vm_id_3.14159";null!==document.getElementById(r)&&document.body.removeChild(document.getElementById(r));var d=document.createElement("canvas");d.width=n.w_width,d.height=n.w_height;var l=d.getContext("2d");if(l.rotate(-n.w_rotateDeg*Math.PI/180),l.font=n.w_font,l.fillStyle=n.w_color,l.textAlign="center",l.textBaseline="Middle",o.w_texts&&"[object Array]"===Object.prototype.toString.call(o.w_texts))for(var a=o.w_texts,i=0;i<a.length;i++)l.fillText(a[i]?a[i]:"",d.width/2,d.height+25*i);var c=document.createElement("div");return c.id=r,c.style.pointerEvents="none",c.style.top=n.w_top,c.style.left=n.w_left,c.style.opacity=n.w_opacity,c.style.position="fixed",c.style.zIndex=n.w_zIndex,c.style.width=document.documentElement.clientWidth+"px",c.style.height=document.documentElement.clientHeight+"px",c.style.background="url("+d.toDataURL("image/png")+") left top repeat",document.body.appendChild(c),setTimeout(()=>{e.observeDomChange(c,o)},0),r},e.observeDomChange=(t,o)=>{const n=document.querySelector("body");new MutationObserver((function(n,r){for(let d of n)d.target===t&&(window.alert("非法操作！！！"),d.target.remove(),e.loadWatermark(o),r.disconnect()),d.removedNodes.length&&d.removedNodes[0]===t&&(window.alert("非法操作！！！"),e.loadWatermark(o),r.disconnect())})).observe(n,{attributes:!0,childList:!0,subtree:!0})},e}));
